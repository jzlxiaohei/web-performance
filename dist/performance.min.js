!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(){var e={};return e.perfTiming=window.performance.timing,e.perfTiming.loadEventEnd-e.perfTiming.navigationStart<0&&console.warn("Page is still loading - please try again when page is loaded."),e}function a(){var e={};return e.marks=window.performance.getEntriesByType("mark"),e.measures=window.performance.getEntriesByType("measure"),e}function i(){var e={resources:[],allResourcesCalc:[]};e.resources=window.performance.getEntriesByType("resource"),e.allResourcesCalc=e.resources.map(function(e,t,n){var o,r,a,i=0===e.name.indexOf("http");i?(o=e.name.match(/:\/\/(.[^\/]+)([^?]*)\??(.*)/),r=o[2].split("/").pop(),a=r.substr((Math.max(0,r.lastIndexOf("."))||1/0)+1)):(o=["",location.host],a=e.name.split(":")[0]);var s={name:e.name,domain:o[1],initiatorType:e.initiatorType||a||"SourceMap or Not Defined",fileExtension:a||"XHR or Not Defined",loadtime:e.duration,fileType:u["default"].getFileType(a,e.initiatorType),isRequestToHost:o[1]===location.host};for(var l in e)"function"!=typeof e[l]&&(s[l]=e[l]);return e.requestStart&&(s.requestStartDelay=e.requestStart-e.startTime,s.dns=e.domainLookupEnd-e.domainLookupStart,s.tcp=e.connectEnd-e.connectStart,s.ttfb=e.responseStart-e.startTime,s.requestDuration=e.responseStart-e.requestStart),e.secureConnectionStart&&(s.ssl=e.connectEnd-e.secureConnectionStart),s}),e.requestsOnly=e.allResourcesCalc.filter(function(e){return 0===e.name.indexOf("http")&&!e.name.match(/js.map$/)}),e.initiatorTypeCounts=u["default"].getItemCount(e.requestsOnly.map(function(e,t,n){return e.initiatorType||e.fileExtension}),"initiatorType"),e.initiatorTypeCountHostExt=u["default"].getItemCount(e.requestsOnly.map(function(e,t,n){return(e.initiatorType||e.fileExtension)+" "+(e.isRequestToHost?"(host)":"(external)")}),"initiatorType"),e.requestsByDomain=u["default"].getItemCount(e.requestsOnly.map(function(e,t,n){return e.domain}),"domain"),e.fileTypeCountHostExt=u["default"].getItemCount(e.requestsOnly.map(function(e,t,n){return e.fileType+" "+(e.isRequestToHost?"(host)":"(external)")}),"fileType"),e.fileTypeCounts=u["default"].getItemCount(e.requestsOnly.map(function(e,t,n){return e.fileType}),"fileType");var t={};return e.requestsOnly.forEach(function(n){var o=e.requestsByDomain.filter(function(e){return e.domain==n.domain})[0]||{},r=t[n.domain]||0;n.duration=o.duration||n.responseEnd-n.startTime,r<=n.startTime?o.durationTotalParallel=(o.durationTotalParallel||0)+n.duration:r<n.responseEnd&&(o.durationTotalParallel=(o.durationTotalParallel||0)+(n.responseEnd-r)),t[n.domain]=n.responseEnd||0,o.durationTotal=(o.durationTotal||0)+n.duration}),e.hostRequests=e.requestsOnly.filter(function(e){return e.domain===location.host}).length,e.currAndSubdomainRequests=e.requestsOnly.filter(function(e){return e.domain.split(".").slice(-2).join(".")===location.host.split(".").slice(-2).join(".")}).length,e.crossDocDomainRequests=e.requestsOnly.filter(function(e){return!u["default"].endsWith(e.domain,document.domain)}).length,e.hostSubdomains=e.requestsByDomain.filter(function(e){return u["default"].endsWith(e.domain,location.host.split(".").slice(-2).join("."))&&e.domain!==location.host}).length,e.slowestCalls=[],e.average=void 0,e.allResourcesCalc.length>0&&(e.slowestCalls=e.allResourcesCalc.filter(function(e){return e.name!==location.href}).sort(function(e,t){return t.duration-e.duration}),e.average=Math.floor(e.slowestCalls.reduceRight(function(e,t){return"number"!=typeof e?e.duration+t.duration:e+t.duration})/e.slowestCalls.length)),e}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=o(s),l=function(){var e=r(),t=e.perfTiming;return{url:window.location.href,start:t.navigationStart,dns:t.domainLookupEnd-t.domainLookupStart,tcp:t.connectEnd-t.connectStart,total:t.loadEventEnd-t.navigationStart,timeToFirstByte:t.responseStart-t.navigationStart,domContentLoading:t.domContentLoadedEventStart-t.domLoading,domProcessing:t.domComplete-t.domLoading}},c=function(){var e=i(),t=e.allResourcesCalc.map(function(e){return{name:e.name,domain:e.domain,fileType:e.fileType,initiatorType:e.initiatorType,fileExtension:e.fileExtension,loadtime:e.loadtime,isRequestToHost:e.isRequestToHost,requestStartDelay:e.requestStartDelay,dns:e.dns,tcp:e.tcp,ttfb:e.ttfb,requestDuration:e.requestDuration,ssl:e.ssl}});return{requests:e.requestsOnly.length,domains:e.requestsByDomain.length,subDomainsOfTld:e.hostSubdomains,requestsToHost:e.hostRequests,tldAndSubdomainRequests:e.currAndSubdomainRequests,resources:t}},d=!1,f=[];window.addEventListener("load",function(){setTimeout(function(){f.forEach(function(e){e()}),d=!0},0)}),t["default"]={getMetricsForTiming:l,getMetricsForResource:c,getMarkAndMeasure:a,_getResourcesData:i,_getTimingData:r,ready:function(e){d?e():f.push(e)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};n.getFileType=function(e,t){if(e)switch(e){case"jpg":case"jpeg":case"png":case"gif":case"webp":case"svg":case"ico":return"image";case"js":return"js";case"css":return"css";case"html":return"html";case"woff":case"woff2":case"ttf":case"eot":case"otf":return"font";case"swf":return"flash";case"map":return"source-map"}if(t)switch(t){case"xmlhttprequest":return"ajax";case"img":return"image";case"script":return"js";case"internal":case"iframe":return"html";default:return"other"}return t},n.endsWith=function(e,t){return e.indexOf(t,e.length-t.length)!==-1},n.getItemCount=function(e,t){var n,o={},r=[];e.forEach(function(e){o[e]=o[e]?o[e]+1:1});for(var a in o)n={},n[t||"key"]=a,n.count=o[a],r.push(n);return r.sort(function(e,t){return e.count<t.count?1:-1})},t["default"]=n}])});