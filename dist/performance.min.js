!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e={};return e.perfTiming=window.performance.timing,e.perfTiming.loadEventEnd-e.perfTiming.navigationStart<0&&console.warn("Page is still loading - please try again when page is loaded."),e}function i(){var e={};return e.marks=window.performance.getEntriesByType("mark"),e.measures=window.performance.getEntriesByType("measure"),e}function a(){var e={resources:[],allResourcesCalc:[]};e.resources=window.performance.getEntriesByType("resource"),e.allResourcesCalc=e.resources.map(function(e,t,n){var r,o,i,a=0===e.name.indexOf("http");a?(r=e.name.match(/:\/\/(.[^\/]+)([^?]*)\??(.*)/),o=r[2].split("/").pop(),i=o.substr((Math.max(0,o.lastIndexOf("."))||1/0)+1)):(r=["",location.host],i=e.name.split(":")[0]);var s={name:e.name,domain:r[1],initiatorType:e.initiatorType||i||"SourceMap or Not Defined",fileExtension:i||"XHR or Not Defined",loadtime:e.duration,fileType:u["default"].getFileType(i,e.initiatorType),isRequestToHost:r[1]===location.host};for(var l in e)"function"!=typeof e[l]&&(s[l]=e[l]);return e.requestStart&&(s.requestStartDelay=e.requestStart-e.startTime,s.dns=e.domainLookupEnd-e.domainLookupStart,s.tcp=e.connectEnd-e.connectStart,s.ttfb=e.responseStart-e.startTime,s.requestDuration=e.responseStart-e.requestStart),e.secureConnectionStart&&(s.ssl=e.connectEnd-e.secureConnectionStart),s}),e.requestsOnly=e.allResourcesCalc.filter(function(e){return 0===e.name.indexOf("http")&&!e.name.match(/js.map$/)}),e.initiatorTypeCounts=u["default"].getItemCount(e.requestsOnly.map(function(e,t,n){return e.initiatorType||e.fileExtension}),"initiatorType"),e.initiatorTypeCountHostExt=u["default"].getItemCount(e.requestsOnly.map(function(e,t,n){return(e.initiatorType||e.fileExtension)+" "+(e.isRequestToHost?"(host)":"(external)")}),"initiatorType"),e.requestsByDomain=u["default"].getItemCount(e.requestsOnly.map(function(e,t,n){return e.domain}),"domain"),e.fileTypeCountHostExt=u["default"].getItemCount(e.requestsOnly.map(function(e,t,n){return e.fileType+" "+(e.isRequestToHost?"(host)":"(external)")}),"fileType"),e.fileTypeCounts=u["default"].getItemCount(e.requestsOnly.map(function(e,t,n){return e.fileType}),"fileType");var t={};return e.requestsOnly.forEach(function(n){var r=e.requestsByDomain.filter(function(e){return e.domain==n.domain})[0]||{},o=t[n.domain]||0;n.duration=r.duration||n.responseEnd-n.startTime,o<=n.startTime?r.durationTotalParallel=(r.durationTotalParallel||0)+n.duration:o<n.responseEnd&&(r.durationTotalParallel=(r.durationTotalParallel||0)+(n.responseEnd-o)),t[n.domain]=n.responseEnd||0,r.durationTotal=(r.durationTotal||0)+n.duration}),e.hostRequests=e.requestsOnly.filter(function(e){return e.domain===location.host}).length,e.currAndSubdomainRequests=e.requestsOnly.filter(function(e){return e.domain.split(".").slice(-2).join(".")===location.host.split(".").slice(-2).join(".")}).length,e.crossDocDomainRequests=e.requestsOnly.filter(function(e){return!u["default"].endsWith(e.domain,document.domain)}).length,e.hostSubdomains=e.requestsByDomain.filter(function(e){return u["default"].endsWith(e.domain,location.host.split(".").slice(-2).join("."))&&e.domain!==location.host}).length,e.slowestCalls=[],e.average=void 0,e.allResourcesCalc.length>0&&(e.slowestCalls=e.allResourcesCalc.filter(function(e){return e.name!==location.href}).sort(function(e,t){return t.duration-e.duration}),e.average=Math.floor(e.slowestCalls.reduceRight(function(e,t){return"number"!=typeof e?e.duration+t.duration:e+t.duration})/e.slowestCalls.length)),e}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=r(s),l=function(){var e=o();return{timestamp:new Date(e.perfTiming.navigationStart).toISOString(),url:window.location.href,total:e.perfTiming.loadEventEnd-e.perfTiming.navigationStart,timeToFirstByte:e.perfTiming.responseStart-e.perfTiming.navigationStart,domContentLoading:e.perfTiming.domContentLoadedEventStart-e.perfTiming.domLoading,domProcessing:e.perfTiming.domComplete-e.perfTiming.domLoading}},c=function(){var e=a(),t=e.allResourcesCalc.map(function(e){return{name:e.name,domain:e.domain,fileType:e.fileType,initiatorType:e.initiatorType,fileExtension:e.fileExtension,loadtime:e.loadtime,isRequestToHost:e.isRequestToHost,requestStartDelay:e.requestStartDelay,dns:e.dns,tcp:e.tcp,ttfb:e.ttfb,requestDuration:e.requestDuration}});return{requests:e.requestsOnly.length,domains:e.requestsByDomain.length,subDomainsOfTdl:e.hostSubdomains,requestsToHost:e.hostRequests,tldAndSubdomainRequests:e.currAndSubdomainRequests,resources:t}},f=!1,d=[];window.addEventListener("load",function(){setTimeout(function(){d.forEach(function(e){e()}),f=!0},0)}),t["default"]={getMetricsForTiming:l,getMetricsForResource:c,getMarkAndMeasure:i,_getResourcesData:a,_getTimingData:o,ready:function(e){f()?e():d.push(e)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};n.getFileType=function(e,t){if(e)switch(e){case"jpg":case"jpeg":case"png":case"gif":case"webp":case"svg":case"ico":return"image";case"js":return"js";case"css":return"css";case"html":return"html";case"woff":case"woff2":case"ttf":case"eot":case"otf":return"font";case"swf":return"flash";case"map":return"source-map"}if(t)switch(t){case"xmlhttprequest":return"ajax";case"img":return"image";case"script":return"js";case"internal":case"iframe":return"html";default:return"other"}return t},n.endsWith=function(e,t){return e.indexOf(t,e.length-t.length)!==-1},n.getItemCount=function(e,t){var n,r={},o=[];e.forEach(function(e){r[e]=r[e]?r[e]+1:1});for(var i in r)n={},n[t||"key"]=i,n.count=r[i],o.push(n);return o.sort(function(e,t){return e.count<t.count?1:-1})},t["default"]=n}])});